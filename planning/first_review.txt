■初期仕様の叩き台です。現仕様ではありませんが参考までに。

MonoGameを使用してゲーム開発したいが、
気軽にゲーム開発するための機能が不足しているため、
MonoGameのラッパークラスを設計し、別の生成AIへ実装を依頼するための仕様を検討し、
依頼用のテキストを作成すること。

# ラッパー概要

本ラッパーはMononotonkaと命名する。
関連クラスへのアクセスはton.log、ton.2Dなど容易な名前とする。
開発者がラッパーを使用する際は、「導入の容易さ」「コーディングの容易さ」を重要視し、
かつ、必要最低限の機能は盛り込むこと。

コーディングの容易さとは、何をするかわかりやすい関数名、
開発者が手動でやることを極力減らす、などユーザーフレンドリーさを表わす。

必要そうな機能があれば提案すること。

# クラスについて

以下のクラスを作成する。
各クラスは全てシングルトンパターン(もしくはそのようなもの)などを用いて
直接実体(ton)にアクセスして利用する。
クラスごとにファイルを分けられるとベター。
3Dは不要。

- ログクラス
- 基本処理クラス
- ゲームコントローラクラス
- 2Dグラフィッククラス
- サウンドクラス
- メッセージウィンドウヘルパークラス
- コンフィグヘルパー

# コーディングについて

関数作成時は必ずドキュメントコメントを作成すること。
その時、あなた自身、及び第三者が後から参照した時に困らないような形にすること。
関数の引数などはこのドキュメントでは指定しないが、自律的に考えて実装すること。

------------------------------------------------------------
# ログクラス(ton.log)

最も最初に作成され、最も最後に破棄されるクラス。
ログを簡単に出力できる。
ログはアプリケーションフォルダ配下のlogフォルダに出力する。
ファイル名はton.<yyyyMMddHHmmss>.logなどとし、logフォルダ内のファイルが30ファイルを
超える場合は、古いものから削除していくこと。
ソースファイル名、行番号、ログレベル、書式(String.Format)など基本的な機能は盛り込むこと。
ログを見やすくするため、ソースファイル名や行番号は固定長にする。

------------------------------------------------------------
# 基本処理クラス(ton.game)

ゲームに必要なウィンドウ等の初期化・後処理を行うクラス。
ウィンドウを作成する(ウィンドウサイズはユーザーが好きに変えられる(マウス、最大化ボタンなどで))。
解像度情報を収集し、保持、また、ログに出力する
フルスクリーン・ウィンドウを

------------------------------------------------------------
# ゲームコントローラクラス(ton.input)

キーボードとゲームコントローラを一元的に扱うためのクラス。
起動時にゲームコントローラデバイスが接続されているか確認する。ない場合は元々ないものとして扱う。
コントローラデバイスの情報を収集し、保持、また、ログに出力する。
ゲームコントローラデバイスは最大一台として設計する。
前フレームの入力を記録して、「押されている」「押された瞬間」「離されている」「離された瞬間」を取得できるようにする。
アプリケーションフォルダにinput.configファイル(中身はjsonとか)があれば、そのファイルに含まれる設定を使い、ない場合は既定値を使う。
1フレームごとにゲームコントローラデバイスがロストしていないかチェックし、
ロストした場合はゲームを中断して再接続を促す画面を出し、一定時間(120秒)反応がない場合はキーボードのみの扱いにして元の画面に戻す。

キーボードとゲームコントローラの入力を紐づける際の既定値は以下の通り。

 <キーボード> <ゲームコントローラ> <割当て名>
 Keys.Up      Buttons.DPadUp       Up
 Keys.Down    Buttons.DPadDown     Down
 Keys.Left    Buttons.Left         Left
 Keys.Right   Buttons.Right        Right
 Keys.Z       Buttons.A            A
 Keys.X       Buttons.B            B
 Keys.C       Buttons.X            X
 Keys.A       Buttons.Y            Y

------------------------------------------------------------
# 2Dグラフィッククラス(ton.gra)

デフォルトの描画先は仮想画面(1920x1080をデフォルトにする)で、仮想画面に全て描いてから、バックバッファに転送する(ウィンドウの場合はアスペクト比を崩さない範囲で拡大縮小表示にする)。
仮想画面をバックバッファに転送する際は、フェードイン・アウト、モノクロ、
セピア、モザイク、画面振動、などの基本的なエフェクトができるようにする
(エフェクトは時間指定、オン、オフなど一回だけの指定で済むとベター！シーン変更も一緒にできるとハッピー！)。


デフォルトの描画先は仮想画面であると前述したが、空のスプライトを作成してそこへの描画も簡単にできるようにする(これも前述のエフェクトが使えるようにする)

画像リソースをロードした際、既にロードされている場合は再ロードせず、何もしない。
一定時間(1分とか)全く使われなかった画像はリリースする(1分に一度ぐらいチェックする)。
スプライトを描画に使用する度に内部未使用時間を0にリセットする。
開発者目線ではロード処理は頻繁に行っているように見えるが、実際にはキャッシュにあればそれを使用し、
要らなくなったら自然にアンロードするためロード時間は短くなる。

画像リソースをロード・リリースした際、ログに詳細を書き込む(キャッシュがあるため、頻繁には書かれないはず)。

画像リソースをロードする際、「このリソースはこの名前で使うよ」と指定する。
描画する時にその名前を指定して描画するが、辞書にヒットしない場合はログに出力する。
但し、ログに毎フレーム書き込むわけにはいかないので、同一名称は一度だけ書き込む。

通常の四角形ビットマップ描画は
転送先X(中心,px),転送先Y(中心,px),転送元スプライト名,転送元左上X(px), 転送元左上Y(px), 幅(px), 高さ(px), アニメーションヘルパー(オプション)を指定する。

拡大・回転四角形ビットマップ描画は
転送先X(中心,px),転送先Y(中心,px),転送元スプライト名,転送元左上X(px), 転送元左上Y(px), 幅(px), 高さ(px), パラメータ構造体(もしくはクラス), アニメーションヘルパー(オプション)を指定する。
パラメータ構造体にて角度と拡大率(縦と横)を指定する。

アニメーションヘルパーにはコマ数、各コマの秒数、ループ有無、座標追加方向などを指定して、
アニメーションを簡単に再生出来るようにする。
(アニメーションは、1枚の画像にアニメーション絵が何枚も連なっているものを想定)

描画先は別の関数で都度指定する。(描画命令を書く度に描画先を書きたくないので。描画元も極力書かなくて済むようにならないか？)

指定色での四角形塗りつぶし描画も欲しい。(色々使えるので。半透明対応もできると嬉しい)

フォントの描画も可能にする。
起動時にfontフォルダ内のフォントを全てロードする。
フォントの描画機能も提供する(アンチエイリアスのオンオフ、文字サイズ、文字間距離も指定できるようにする)

------------------------------------------------------------
# サウンドクラス(ton.sound)

2Dグラフィッククラスと同様に、サウンドもキャッシュ管理する(1秒に一回ほど再生中かどうかチェックし、10分以上不使用ならリリース)。

音声の再生は、通常再生、ループ再生を指定する。
再生時のボリューム指定とは別に、マスターボリュームを指定できるようにする。
マスターボリュームはコンフィグ画面で指定できるようにする。

音声の停止は、個別停止、全体停止を指定可能。
パンはあってもなくても可。

------------------------------------------------------------
# メッセージウィンドウヘルパークラス(ton.msg)

2Dグラフィッククラスとゲームコントローラクラスを利用して、メッセージウィンドウを作成するヘルパークラスを作る。
メッセージウィンドウは、テキストを表示する。
テキストはスクリプトを指定する。

スクリプトは改行、フォントサイズ変更、フォントカラー変更、メッセージ送りスピード変更、メッセージ送りなどの
一般的にゲームで利用できる機能をもたせる。
特定の文字を表示するときだけビットマップを表示する機能も持たせたい。(環境依存しないハートマークの表示など)

開発者がとにかく楽できるようにしたい。

------------------------------------------------------------
# コンフィグヘルパークラス(ton.configmenu)

2Dグラフィッククラスとゲームコントローラクラスを利用して、簡易的なコンフィグ画面を表示できるようにしたい。
コンフィグ画面は起動時のメニュー画面、もしくはゲーム中のコンフィグ画面呼び出しなど。
設定できる項目は、解像度、フルスクリーン、マスターボリューム、メッセージ表示速度など。
キーバインドは不要(どうしても必要な人には個別にinput.configを作ってもらう)
開発者がとにかく楽できるようにしたい。
------------------------------------------------------------
